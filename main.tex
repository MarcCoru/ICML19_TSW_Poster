\documentclass[a0]{tumposter}

\usepackage[english]{babel}

\usepackage{blindtext}

\usepackage{multicol}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{natbib}

% for printing fontsizes
\usepackage{printlen}
\uselengthunit{mm}

\input{preamble.tex}

\usepackage[utf8]{inputenc}

\title{
	BreizhCrops: A Satellite Time Series Dataset \\ for Crop Type Identification
	}
	
\author{
	Marc Rußwurm\footnotemark[1],
	Sébastien Lefèvre\footnotemark[2],
	Marco Körner\footnotemark[1]
	}

\header{
	Remote Sensing Technology \\
	TUM Department of Civil, Geo and Environmental Engineering \\
	Technical University of Munich
	}
	
\begin{document}
	\tikzstyle{every picture}+=[remember picture]
	
\maketitle

%\newcommand{\satellitebox}{
%	\begin{tikzpicture}[node distance=1em]
%	\node(title){Satellite Data $\V{x}$};
%	\node[below=of title](s2){\includegraphics[width=15cm]{images/sentinel2}};
%	\node[below=of s2, text width=20cm]{
%	ESA Sentinel 2 Satellite
%	\begin{itemize}\setlength\itemsep{.1em}
%		\item 13 spectral bands
%		\item every 2-10 days
%		\item global coverage
%		\item free of charge	
%	\end{itemize}
%};
%\end{tikzpicture}
%}

%\newcommand{\modelbox}{
%	\begin{tikzpicture}[node distance=1em]
%\node(title){classification model $f$};
%\node[below=of title](large){\includegraphics[width=15cm]{images/Large1954_cerial_growth_stages.png}};
%\node[below=of large](label){learning a phenological model};
%
%\node[below=3em of label, xshift=-5em, anchor=east]{?};
%\node[below=3em of label, anchor=center]{health};
%\node[below=3em of label, xshift=5em, anchor=west]{droughts};
%
%
%\end{tikzpicture}
%}

%\newcommand{\labelbox}{
%\begin{tikzpicture}[node distance=1em]
%\node(title){crop type labels $\V{y}$};
%\node[below=of title](large){\includegraphics[width=15cm]{images/map/parcels}};
%\node[below=of large, text width=20cm]{
%Crop Type Labels
%\begin{itemize}\setlength\itemsep{.1em}
%\item Europes Common Agricultural Policy (CAP)
%\item reported by respective farmer
%\item gathered by national institutions (IGN in France)
%\end{itemize}
%};
%\end{tikzpicture}
%}

%\vspace{-1em}
\begin{minipage}[t]{0.65\textwidth}

\section{Objective}

\begin{tikzpicture}[scale=16]
	\node[label={[name=sat,text height=1.5ex,text depth=.25ex]Satellite Data}, anchor=north](x) at (-1,0){$\M{X} = (\V{x}_0, \V{x}_1, \dots , \V{x}_T)$};
	\node[below=of x, label={[yshift=1.3em, xshift=1.8em, font=\tiny, text=white]below:ESA Sentinel 2 Satellite}](s2){\includegraphics[width=13cm]{images/sentinel2}};

	
	\node[below=of s2, text width=13cm](eqbox){
		surface reflectance
		\centering
		$
		\rho_\lambda = 
		\frac{
			\pi L_\lambda d^2
		}
		{
			E_\text{sun} \cos(\varphi_\text{sun})
		}
		$
		
%		\begin{tikzpicture}[scale=3.5, anchor=center]
%		
%%			\node at (0,0){};
%			\node(eq) at (0,0) {
%
%				};
%		\end{tikzpicture}
		\includegraphics[width=7.55cm]{images/reflectance}
%		\vspace{1em}
		
		{\small in 13 spectral bands\\
		\vspace{1em}
		$\V{x}_t = \left(\rho_{\text{red}},\rho_{\text{green}},\rho_{\text{nir}},\dots\right)^T$}
	};
	
	\node[label={[name=cm,text height=1.5ex,text depth=.25ex]Classification Model}, anchor=north](f) at (0,0){ $\V{y} = f(\M{x})$};
	\node[below=of f](large){\includegraphics[width=13cm]{images/Large1954_cerial_growth_stages.png}};
	\node[below=of large, circle, fill=tumbluedark, text=white, text width=10cm](label){learning a \\ \textbf{\Large\color{tumorange}vegetation} \color{tumwhite} model $f$};
	\node[below=of label, xshift=-3em, yshift=1em, rotate=0, text=tumgraydark](yield){yield?};
	\node[below=of label, text=tumgraydark](prod){production?};
	\node[below=of label, xshift=3em, yshift=1em, text=tumgraydark](health){health?};
	\node[fit=(yield)(prod)(health), draw=none, rounded corners, label={[anchor=north, font=\tiny, xshift=3em, yshift=.75em, text=tumblue]south:\#foodsecurity}](foodsec){};
	

	\node[label={[name=ctm,text height=1.5ex,text depth=.25ex]Crop Type Labels}, anchor=north](y) at (1,0){
		$\V{y} = \small (y_\text{corn}, y_\text{barley}, \dots) \in \mathbb{R}^{13}$
	};
	\node[below=of y, label=below:IGN crop type labels](labels){\includegraphics[width=13cm]{images/map/parcels}};
	\node[below=of labels, text width=12cm](lbls){
		\small
	\begin{itemize}\setlength\itemsep{.1em}
		\item European Common Agricultural Policy (CAP)
		\item collected yearly in entire Europe
		\item slowly made publicly available
		\item today, gathered on a national basis
		\item in future harmonized within Europe's INSPIRE directive
	\end{itemize}
	};
	
	\draw[thin, -{Stealth[scale=.5]}, tumblue] (x) -- (f);
	\draw[thin, -{Stealth[scale=.5]}, tumblue] (f) -- (y);
	
	\scoped[on background layer]
	{
		\node[fit=(ctm)(lbls), fill=tumbluelight!20, inner sep=1em, rounded corners]{};
		\node[fit=(cm)(foodsec), fill=tumorange!20, inner sep=1em, rounded corners]{};
		\node[fit=(sat)(eqbox), fill=tumbluelight!20, inner sep=1em, rounded corners]{};
	}	
	
\end{tikzpicture}

\section{Data}
Data gathered in Brittany, France (\textit{Breizh}) in 2017 covering 27.206 km².
%
%\vspace{1em}

\subsection{Labels}
\small 580k field parcels with 13 crop categories

\vspace{1em}
\begin{tikzpicture}[scale=16]
	\node[label={[name=label]Field Parcels}](a) at (-1,0){\includegraphics[width=13cm]{images/map/breizh}};
%	\node[fit=(label)(a), draw=tumbluedark, rounded corners, minimum height=13cm]{};
%%	\node[above=of a, text width=14cm, font=\tiny]{field parcels in Brittany colored by crop type label};
	%
	\node[label={[name=label, text height=2ex]above: Administrative Divisions}](b) at (0,0){\includegraphics[width=12.6cm]{images/map/regions}};
%	\node[fit=(label)(b), draw=tumbluedark, rounded corners, minimum height=13cm]{};
	
	\node[label={[name=label, text height=2ex]above: European Crop Data}](d) at (1,0){\includegraphics[width=14cm]{images/map/europe_data2.png}};
%	\node[fit=(label)(d), draw=tumbluedark, rounded corners, minimum height=13cm]{};
%	\node[right=of b](c){
%		\small
%			\begin{tabular}{lrr}
%			\toprule
%			Departements & Parcels \\
%			\cmidrule(lr){1-1}\cmidrule(lr){2-2}\cmidrule(lr){3-3}
%			%			\midrule
%			Morbihan & 158522 \\
%			Côtes-d’Armor & 221095 \\
%			Finistère & 180565\\
%			Ille-et-Vilaine & 207993\\
%			\bottomrule
%			\end{tabular}	
%		};
	\node[below=of b, label={[yshift=-1em]above:Class Frequency in the Administrative Divisions}, yshift=1em](histogram){
	\input{images/partition_histograms.tikz}
	};

	\scoped[on background layer]
	{
		\node[fit=(a)(b)(d)(histogram)(label), fill=tumbluelight!20, inner sep=0em, rounded corners]{};
	}	
	
\end{tikzpicture}
\vspace{-1em}
% \small \textbf{Time Series} 
\subsection{Satellite Reflectance Time Series}
\small 70-150 surface reflectance measurements in 13 spectral bands for each parcel of the season 2017

\begin{tikzpicture}[xscale=11, yscale=-4]
\input{images/example.tikz}
\node[label={[yshift=.75em]below:\tiny corn parcel}](a) at (-1,0){\examplecorn};
\node[label={[yshift=.75em]below:\tiny meadow parcel}](b) at (1,0){\examplemeadows};
\node(c) at (0,1.2) {\includegraphics[width=\textwidth]{images/legend_x2.png}};

\scoped[on background layer]
{
	\node[fit=(a)(b)(c), fill=tumbluelight!20, inner sep=0em, rounded corners]{};
}
\end{tikzpicture}

\end{minipage}
\hfill
\begin{minipage}[t]{0.32\textwidth}
	
	\section{Results}
	
	We show the feasibility of classifying this dataset with \textbf{\color{tumblue}LSTM} \citep{hochreiter1997long} and \textbf{\color{tumorange}Tranformer} \citep{Vaswani:Transformer} baselines.
	
%	\input{images/lstmmodel.tikz}
%	\lstmmodel
%	\transformermodel
	
	\vspace{.5em}
	
	\begin{tikzpicture}
		\node[label={[name=lab3]above:Comparison of Baseline Models}](a){
		\begin{tabular}{lccccccc}
		\toprule
		method & accuracy & $\kappa$ & $f_1$ & prec.  & rec. \\
		\cmidrule(lr){1-1}\cmidrule(lr){2-2}\cmidrule(lr){3-3}\cmidrule(lr){4-4}\cmidrule(lr){5-5}\cmidrule(lr){6-6}\cmidrule(lr){7-7}
		\textbf{\color{tumorange}Transformer} & \textbf{.69}  &  \textbf{.63} & .57 & {.60} & .56 \\
		\textbf{\color{tumblue}LSTM} & .68 & .62 & \textbf{.59} & \textbf{.63} & \textbf{.58} \\
		\bottomrule
		\end{tabular}
		};
		\scoped[on background layer]
		{
			\node[fit=(a)(lab3), fill=tumgraylight!40, inner sep=0em, rounded corners]{};
		}
	\end{tikzpicture}

	\vspace{.5em}
	
	\tikzstyle{crop} = [fill=tumbluelight, rounded corners]
	
	
	\begin{tikzpicture}[xscale=6, yscale=15]
		\node[label={[name=lab2]above:Class-wise results of the LSTM model.}](a) at (0,0){{\small\input{images/data/BreizhCrops_rnn/npy/table.tex}}};
		\node[rounded corners, label={[name=lab]below:\small precision}](b) at (-1,-1){\resizebox{12cm}{!}{\confmat{images/data/BreizhCrops_rnn/npy/confmat_flat.csv}{3}{1}}};
		\node[rounded corners, label=below:\small recall](c) at (1,-1){\resizebox{12cm}{!}{\confmat{images/data/BreizhCrops_rnn/npy/confmat_flat.csv}{4}{1}}};
		
		\scoped[on background layer]
		{
			\node[fit=(a)(b)(c)(lab)(lab2), fill=tumbluelight!20, inner sep=0em, rounded corners]{};
		}
		
	\end{tikzpicture}


	 \section{Outlook}
%	 
%	 \begin{minipage}{\textwidth}
%	 	
	 	\begin{itemize}
	 		\item \textbf{pre-train} vegetation model on available crop type data
	 		\item test \textbf{generalization} over \textbf{changing environmental conditions}
	 		\item \textit{Google Research Credits} for large-scale crop type mapping  
	 	\end{itemize}
	 	
%	 \end{minipage}
%%	 \begin{minipage}{.38\textwidth}
%%	 	\includegraphics[width=\textwidth]{images/map/europe_data.pdf}
%	 	\tiny open crop data regions
%	 \end{minipage}
	 
	 \section{Feedback}
	 
	 \begin{itemize}
	 	\item suggestion of baseline models?
%	 	\item general interest in this application?
%	 	\item use of the dataset for TS community?
	 	\item ideas to address the challenges?
	 \end{itemize}

	\tiny
	\bibliographystyle{icml2019}
	\bibliography{bib/references.bib}

\end{minipage}

%%%%%%%%% Challenges!
\begin{tikzpicture}[overlay]
%\node at (lab){test};
\end{tikzpicture}


% footer environment places \hfill and sets fontsize
\begin{footer}
	\begin{minipage}{.33\textwidth}
		\textbf{Technical University of Munich}\footnotemark[1]\\
		TUM Department of Civil, Geo and Env. Engineering \\
		Remote Sensing Technology \\
		Arcisstr. 21, 80333 Munich, Germany
	\end{minipage}
	\begin{minipage}{.33\textwidth}
		\textbf{IRISA-Obelix}\footnotemark[2]\\
		Université Bretagne Sud \\
		IRISA, UMR 6074 CNRS \\
		Campus de Tohannic, 56000 Vannes, France
		
	\end{minipage}
	\begin{minipage}{.23\textwidth}
		\textbf{Data \& Code} \\
%		\vspace{1em}
		{github.com/TUM-LMF/BreizhCrops} \\
		{https://twitter.com/MarcCoru} \\
		www.lmf.bgu.tum.de/vision
	\end{minipage}
	\begin{minipage}{.10\textwidth}
		\hfill\includegraphics[width=5cm]{images/qrcode}\\
		
	\end{minipage}

	
\end{footer}

\end{document}